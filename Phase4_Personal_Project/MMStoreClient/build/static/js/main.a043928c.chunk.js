(this.webpackJsonpmmstoreclient=this.webpackJsonpmmstoreclient||[]).push([[0],{26:function(t,e,n){},34:function(t,e,n){"use strict";n.r(e);var r=n(1),s=n.n(r),c=n(20),a=n.n(c),o=(n(26),n(9)),i=n(2),u=n(3),l=n(5),d=n(4),h=n(6),j=n(7),p=(n(27),n(0)),b=s.a.createContext(),x=b.Consumer;function m(t){for(var e="",n=document.cookie.split(";"),r=0;r<n.length;r++){var s=n[r].split("=");t===s[0].trim()&&(e=decodeURIComponent(s[1]))}return e}var O=function(){var t={userID:null,userFirstName:null,userLastName:null,userEMail:null,userIsAdmin:"N",accessToken:null},e=m("MMSU");return e.length>0&&3===(e=e.split("|")).length&&(t.userFirstName=e[1],t.userLastName=e[2],t.userEMail=e[0],(e=m("MMST")).length>0&&3===(e=e.split("|")).length&&(t.userID=parseInt(e[0]),t.userIsAdmin=e[1],t.accessToken=e[2])),t},g=function(t,e){switch(e.type){case"UPDATE_USER":return function(t){var e=encodeURIComponent(t.userEMail)+"|"+encodeURIComponent(t.userFirstName)+"|"+encodeURIComponent(t.userLastName);document.cookie="MMSU="+e+";Path=/",document.cookie="MMST="+t.userID+"|"+t.userIsAdmin+"|"+encodeURIComponent(t.accessToken)+";Path=/"}(e.payload),Object(o.a)(Object(o.a)({},t),{},{user:e.payload});case"LOGOFF_USER":return document.cookie="MMSU=;MaxAge=0;Path=/",document.cookie="MMST=;MaxAge=0;Path=/",Object(o.a)(Object(o.a)({},t),{},{user:{userID:null,userFirstName:null,userLastName:null,userEMail:null,userIsAdmin:"N",accessToken:null}});default:return t}},f=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).state={user:O(),dispatch:function(t){return r.setState((function(e){return g(e,t)}))}},r}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsx)(b.Provider,{value:this.state,children:this.props.children})}}]),n}(r.Component),v=function(){return Object(p.jsxs)("div",{className:"MainHeader",children:[Object(p.jsx)("img",{src:"data:image/gif;base64,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",className:"MMSLogo",alt:"MMS"}),Object(p.jsx)("div",{className:"HeaderText",children:Object(p.jsx)("h1",{children:"Mumbai Medicine Store"})})]})},y=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsx)(x,{children:function(t){var e="Y"===t.user.userIsAdmin,n=t.user.userFirstName,r=null!==t.user.accessToken;return Object(p.jsx)("nav",{className:"navbar navbar-expand-sm",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)("a",{href:"/",className:"nav-link",children:"Home"})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)("a",{href:"/products",className:"nav-link",children:"Products"})}),e?Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)("a",{href:"/categories",className:"nav-link",children:"Categories"})}):"",e?Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)("a",{href:"/users",className:"nav-link",children:"Users"})}):"",r?Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsxs)("a",{href:"/logoff",className:"nav-link",children:["Log off ",n]})}):Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)("a",{href:"/logon",className:"nav-link",children:"Log on"})}),r?Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)("a",{href:"/cart",className:"nav-link",children:"Cart"})}):"",r?Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)("a",{href:"/orders",className:"nav-link",children:"Orders"})}):""]})})})}})}}]),n}(r.Component),A=function(){return Object(p.jsx)("div",{className:"Footer",children:"Copyright \xa9 2021 ABC Healthcare Mumbai Medicine Store"})},k=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{className:"MainBody",children:["Welcome to the Mumbai Medicine Store",Object(p.jsx)("br",{}),Object(p.jsx)("br",{})]})}}]),n}(r.Component),N="http://localhost:5000/api";function I(t,e,n){var r={method:t},s={};return null!=e&&(s["Content-Type"]="application/json",r.body=JSON.stringify(e)),null!==n&&void 0!==n&&n.length>0&&(s.Authorization="Bearer "+n),r.headers=s,r}var w=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"completeLogon",value:function(t){this.context.dispatch({type:"UPDATE_USER",payload:t}),document.getElementById("logonmessage").innerText="Welcome back "+t.userFirstName+" "+t.userLastName}},{key:"logonFailed",value:function(t){document.getElementById("logonmessage").innerText="Logon failed"}},{key:"doLogon",value:function(){var t=this,e={userEMail:document.getElementById("txtEMail").value,userPassword:document.getElementById("txtPW").value},n=I("POST",e,null);document.getElementById("logonmessage").innerText="Logging on...",fetch("http://localhost:5000/api/authorize/login",n).then((function(t){return t.json()})).then((function(e){return t.completeLogon(e)})).catch((function(e){return t.logonFailed(e)}))}},{key:"completeRegistration",value:function(t){this.context.dispatch({type:"UPDATE_USER",payload:t}),document.getElementById("registermessage").innerText="Welcome "+t.userFirstName+" "+t.userLastName}},{key:"registrationFailed",value:function(t){document.getElementById("registermessage").innerText="Registration failed"}},{key:"doRegister",value:function(){var t=this,e=document.getElementById("txtNewEMail").value.trim(),n=document.getElementById("txtNewPW").value.trim(),r=document.getElementById("txtNewPW2").value.trim(),s=document.getElementById("txtNewFN").value.trim(),c=document.getElementById("txtNewLN").value.trim(),a=document.getElementById("registermessage");if(0===e.length)a.innerText="An email address is required";else if(0===n.length)a.innerText="A password is required";else if(n!==r)a.innerText="The passwords do not match";else if(0===s.length||0===c.length)a.innerText="First and Last name are required";else{var o=I("POST",{userEMail:e,userPassword:n,userFirstName:s,userLastName:c},null);a.innerText="Registering...",fetch("http://localhost:5000/api/authorize/register",o).then((function(t){return t.json()})).then((function(e){return t.completeRegistration(e)})).catch((function(e){return t.registrationFailed(e)}))}}},{key:"render",value:function(){var t=this;return Object(p.jsxs)("div",{className:"MainBody row",children:[Object(p.jsxs)("div",{className:"col-auto downright border",children:["Returning users:",Object(p.jsx)("br",{}),"EMail address: ",Object(p.jsx)("input",{id:"txtEMail",required:!0,width:250,type:"email"}),Object(p.jsx)("br",{}),"Password: ",Object(p.jsx)("input",{id:"txtPW",required:!0,width:250,type:"password"}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{id:"cmdLogon",onClick:function(e){return t.doLogon()},className:"ActionButton",children:"Log on"}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsx)("span",{id:"logonmessage"})]}),Object(p.jsxs)("div",{className:"col-auto border",children:["New users:",Object(p.jsx)("br",{}),"EMail address: ",Object(p.jsx)("input",{id:"txtNewEMail",required:!0,width:250,type:"email"}),Object(p.jsx)("br",{}),"Password: ",Object(p.jsx)("input",{id:"txtNewPW",required:!0,width:250,type:"password"}),Object(p.jsx)("br",{}),"Confirm Password: ",Object(p.jsx)("input",{id:"txtNewPW2",required:!0,width:250,type:"password"}),Object(p.jsx)("br",{}),"First Name: ",Object(p.jsx)("input",{id:"txtNewFN",required:!0,width:250,type:"text"}),Object(p.jsx)("br",{}),"Last Name: ",Object(p.jsx)("input",{id:"txtNewLN",required:!0,width:250,type:"text"}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{id:"cmdRegister",onClick:function(e){return t.doRegister()},className:"ActionButton",children:"Register"}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsx)("span",{id:"registermessage"})]})]})}}]),n}(r.Component);w.contextType=b;var E=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).msg="Please log on to make purchases",t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){void 0!==this.context&&null!=this.context.user&&null!==this.context.user.accessToken&&(this.context.dispatch({type:"LOGOFF_USER",payload:null}),this.msg="Come back soon!")}},{key:"render",value:function(){return Object(p.jsx)("div",{className:"MainBody",children:Object(p.jsx)("span",{children:this.msg})})}}]),n}(r.Component);E.contextType=b;var C=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).state={token:null,catSelected:0,searchText:"",categoryresp:[],productresp:{offset:0,pageSize:5,totalRecords:0,prevPage:null,nextPage:null,products:{}}},r}return Object(u.a)(n,[{key:"getProducts",value:function(){var t=this,e=I("GET",null,this.state.token),n=this.state.productresp.pageSize,r=this.state.catSelected,s=this.state.searchText,c=N+"/products/list?offset=0&sort=name&pagesize="+n+"&categoryid="+r+"&Search="+encodeURIComponent(s);fetch(c,e).then((function(t){return t.json()})).then((function(e){return t.setState({productresp:e})}))}},{key:"categorySelected",value:function(t){var e=this;this.setState({catSelected:t},(function(){return e.getProducts()}))}},{key:"searchSelected",value:function(t){var e=this;this.setState({searchText:t},(function(){return e.getProducts()}))}},{key:"navigateList",value:function(t){var e=this,n=I("GET",null,this.state.token);fetch(t,n).then((function(t){return t.json()})).then((function(t){return e.setState({productresp:t})}))}},{key:"getData",value:function(){var t=this,e=I("GET",null,this.state.token);fetch("http://localhost:5000/api/categories/list?pagesize=500&offset=0",e).then((function(t){return t.json()})).then((function(e){return t.setState({categoryresp:e.categories})})),this.getProducts()}},{key:"componentDidMount",value:function(){var t=this,e=this.context;this.setState({token:void 0===e?null:e.user.accessToken},(function(){return t.getData()}))}},{key:"render",value:function(){var t=this;return Object(p.jsx)(x,{children:function(e){var n=null!==e.user.accessToken,r="Y"===e.user.userIsAdmin,s=0,c=0;return 0!==t.state.productresp.totalRecords&&(s=t.state.productresp.offset+1,c=t.state.productresp.offset+t.state.productresp.products.length),Object(p.jsxs)("div",{className:"MainBody",children:[Object(p.jsxs)("div",{className:"container-fluid",children:["Category: ",Object(p.jsxs)("select",{id:"catselect",className:"downright",onChange:function(e){return t.categorySelected(e.target.value)},children:[Object(p.jsx)("option",{value:"0",children:"All"}),t.state.categoryresp.map((function(t){return Object(p.jsxs)("option",{value:t.categoryID,children:[t.categoryName,r&&"Y"!==t.categoryIsActive?" [inactive]":""]},t.categoryID)}))]}),"Search: ",Object(p.jsx)("input",{id:"searchTarget",type:"text"}),Object(p.jsx)("button",{id:"doSearch",className:"downright",onClick:function(e){return t.searchSelected(document.getElementById("searchTarget").value)},children:"Find"}),"Products ",s," to ",c," of ",t.state.productresp.totalRecords]}),Object(p.jsx)("div",{className:"container-fluid",children:Array.isArray(t.state.productresp.products)?t.state.productresp.products.map((function(t){return Object(p.jsx)(T,{product:t},t.productID)})):null}),Object(p.jsxs)("div",{className:"container-fluid productbox",children:[n?null:Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{className:"downright",children:"Log on"})}),r?Object(p.jsx)(h.b,{to:{pathname:"/editproduct",state:{id:0}},children:Object(p.jsx)("button",{className:"downright",children:"Add Product"})}):null,null==t.state.productresp.prevPage?null:Object(p.jsx)("button",{id:"backButton",className:"downright",onClick:function(e){return t.navigateList(t.state.productresp.prevPage)},children:"<< Back"}),null==t.state.productresp.nextPage?null:Object(p.jsx)("button",{id:"nextButton",className:"downright",onClick:function(e){return t.navigateList(t.state.productresp.nextPage)},children:">> Next"})]})]})}})}}]),n}(r.Component);C.contextType=b;var T=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).cartUpdated=function(t){0===t.quantity?alert("The item has been removed from the shopping cart"):alert("The item has been added to the shooping cart")},t.cartFailed=function(t){alert("Sorry, the shopping cart was not updated")},t.updateCart=function(e,n){var r=I("POST",{productID:e,quantity:n},void 0===t.context?null:t.context.user.accessToken);fetch("http://localhost:5000/api/cart",r).then((function(t){return t.json()})).then((function(e){return t.cartUpdated(e)})).catch((function(e){return t.cartFailed(e)}))},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this;return Object(p.jsx)(x,{children:function(e){var n=null!==e.user.accessToken,r="Y"===e.user.userIsAdmin;return Object(p.jsxs)("div",{className:"container-fluid productbox",children:[Object(p.jsxs)("div",{className:"boxed productnamebox",children:[t.props.product.productName," (",t.props.product.categoryName,")",Object(p.jsx)("br",{}),t.props.product.productInfo,Object(p.jsx)("br",{}),t.props.product.productCode]}),Object(p.jsxs)("div",{className:"boxed",children:["$",t.props.product.productPrice.toFixed(2),!1===n||"Y"!==t.props.product.productIsActive?null:Object(p.jsx)("span",{className:"p-4",children:Object(p.jsx)("button",{id:"cmdBuy",onClick:function(e){return t.updateCart(t.props.product.productID,1)},children:"Purchase"})})]}),!1===r?null:Object(p.jsx)("div",{className:"boxed",children:Object(p.jsx)(h.b,{to:{pathname:"/editproduct",state:{id:t.props.product.productID}},children:Object(p.jsx)("button",{children:"Edit"})})})]})}})}}]),n}(r.Component);T.contextType=b;var D=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;Object(i.a)(this,n);var s=void 0!==(r=e.call(this,t)).props.location&&void 0!==r.props.location.state&&void 0!==r.props.location.state.id?r.props.location.state.id:null;return r.state={token:null,productID:s,categoryresp:null,productresp:null},r}return Object(u.a)(n,[{key:"getProduct",value:function(){var t=this;if(null!=this.state.productID&&null!=this.state.token)if(0===this.state.productID){this.setState({productresp:{productID:0,productName:"",productInfo:"",productCode:"",productPrice:0,categoryID:1,productIsActive:"Y"}})}else{var e=I("GET",null,this.state.token),n=N+"/products/"+this.state.productID;fetch(n,e).then((function(t){return t.json()})).then((function(e){return t.setState({productresp:e})}))}}},{key:"getData",value:function(){var t=this;if(null!=this.state.productID&&null!=this.state.token){var e=I("GET",null,this.state.token);fetch("http://localhost:5000/api/categories/list?pagesize=500&offset=0",e).then((function(t){return t.json()})).then((function(e){return t.setState({categoryresp:e.categories})})),this.getProduct()}}},{key:"componentDidMount",value:function(){var t=this;this.setState({token:void 0===this.context?null:this.context.user.accessToken},(function(){return t.getData()}))}},{key:"SaveProduct",value:function(){var t=this,e={productName:document.getElementById("prodname").value,productInfo:document.getElementById("prodinfo").value,productCode:document.getElementById("prodcode").value,productPrice:document.getElementById("prodcost").value,categoryID:document.getElementById("prodcat").value,productIsActive:document.getElementById("prodok").checked?"Y":"N"},n=0===this.state.productresp.productID,r=I(n?"POST":"PATCH",e,this.state.token),s=N+"/products"+(n?"":"/"+this.state.productresp.productID);fetch(s,r).then((function(t){return t.json()})).then((function(e){return t.setState({productresp:e},(function(){return alert("Product updated")}))})).catch((function(t){return alert("Unable to save product")}))}},{key:"NeedLogon",value:function(){return Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{className:"action",children:"Log On"})})}},{key:"NotAdmin",value:function(){return"Access denied"}},{key:"NoProduct",value:function(){return"No product selected"}},{key:"NoCategories",value:function(){return"No categories found"}},{key:"EditProduct",value:function(){var t=this;return Object(p.jsxs)(s.a.Fragment,{children:["Product Name: ",Object(p.jsx)("input",{id:"prodname",type:"text",style:{width:"300px"},maxLength:"64",defaultValue:this.state.productresp.productName}),Object(p.jsx)("br",{}),"Category: ",Object(p.jsx)("select",{id:"prodcat",defaultValue:this.state.productresp.categoryID,children:this.state.categoryresp.map((function(t){return Object(p.jsx)("option",{value:t.categoryID,children:t.categoryName},t.categoryID)}))}),Object(p.jsx)("br",{}),"Code: ",Object(p.jsx)("input",{id:"prodcode",type:"text",style:{width:"350px"},maxLength:"64",defaultValue:this.state.productresp.productCode}),Object(p.jsx)("br",{}),"Info: ",Object(p.jsx)("input",{id:"prodinfo",type:"text",style:{width:"350px"},maxLength:"512",defaultValue:this.state.productresp.productInfo}),Object(p.jsx)("br",{}),"Price: ",Object(p.jsx)("input",{id:"prodcost",type:"number",style:{width:"100px"},defaultValue:this.state.productresp.productPrice}),Object(p.jsx)("br",{}),"Active: ",Object(p.jsx)("input",{id:"prodok",type:"checkbox",defaultChecked:"Y"===this.state.productresp.productIsActive}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{className:"Action",onClick:function(e){return t.SaveProduct()},children:"Save"})]})}},{key:"render",value:function(){var t=null!=this.state.token,e=void 0!==this.context.user&&"Y"===this.context.user.userIsAdmin,n=null!=this.state.categoryresp,r=null!=this.state.productresp;return Object(p.jsx)("div",{className:"MainBody",children:!1===t?this.NeedLogon():!1===e?this.NotAdmin():!1===n?this.NoCategories():!1===r?this.NoProduct():this.EditProduct()})}}]),n}(r.Component);D.contextType=b;var S=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).newQuantity=function(t){var e=r.getTotals(t);document.getElementById("totalprod").innerText=e.products,document.getElementById("totalqty").innerText=e.quantity,document.getElementById("totalcost").innerText=e.cost.toFixed(2),document.getElementById("orderbutton").style.display=e.quantity>0?"block":"none"},r.state={token:null,cartresp:{cart:{}}},r}return Object(u.a)(n,[{key:"getCart",value:function(){var t=this,e=I("GET",null,this.state.token);fetch("http://localhost:5000/api/cart",e).then((function(t){return t.json()})).then((function(e){return t.setState({cartresp:e})}))}},{key:"componentDidMount",value:function(){var t=this;this.setState({token:void 0===this.context?null:this.context.user.accessToken},(function(){return t.getCart()}))}},{key:"getTotals",value:function(t){var e=0,n=0,r=0;if(void 0!==this.state.cartresp&&null!==this.state.cartresp.cart&&Array.isArray(this.state.cartresp.cart)){var s=this.state.cartresp.cart;for(var c in s){null!==t&&t.prod===s[c].productID&&(s[c].quantity=t.quantity);var a=s[c].quantity,o=s[c].productPrice;s[c].quantity>0&&e++,n+=a,r+=o*a}}return{products:e,quantity:n,cost:r}}},{key:"render",value:function(){var t=this,e=this.getTotals(null);return Object(p.jsx)(x,{children:function(n){var r=null!==n.user.accessToken;return Object(p.jsx)("div",{className:"MainBody",children:r?Object(p.jsx)("div",{className:"container-fluid",children:Array.isArray(t.state.cartresp.cart)?Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsxs)("table",{className:"table",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Product"}),Object(p.jsx)("th",{children:"Quantity"}),Object(p.jsx)("th",{children:"Price"}),Object(p.jsx)("th",{children:"Total"})]})}),Object(p.jsx)("tbody",{children:t.state.cartresp.cart.map((function(e){return Object(p.jsx)(M,{token:t.state.token,item:e,callback:t.newQuantity},e.productID)}))})]}),Object(p.jsxs)("div",{className:"container-fluid row",children:[Object(p.jsxs)("div",{className:"col-auto",children:["Products: ",Object(p.jsx)("span",{id:"totalprod",children:e.products}),Object(p.jsx)("br",{}),"Quantity: ",Object(p.jsx)("span",{id:"totalqty",children:e.quantity}),Object(p.jsx)("br",{}),"Total: $",Object(p.jsx)("span",{id:"totalcost",children:e.cost})]}),e.quantity<1?null:Object(p.jsx)("div",{id:"orderbutton",style:{display:"block"},className:"col-auto",children:Object(p.jsx)(h.b,{to:"/neworder",children:Object(p.jsx)("button",{className:"action",children:"Place order"})})})]})]}):null}):Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{id:"cmdLogon",className:"action",children:"Log On"})})})}})}}]),n}(r.Component);S.contextType=b;var M=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"updatedquantity",value:function(t){this.props.item.quantity=t.quantity,this.forceUpdate(),this.props.callback(t)}},{key:"updateItemQuantity",value:function(t,e){var n=this,r=I("POST",{productID:t,quantity:e},this.props.token);fetch("http://localhost:5000/api/cart",r).then((function(t){return t.json()})).then((function(t){return n.updatedquantity(t)})).catch((function(t){return alert("Unable to update shopping cart")}))}},{key:"render",value:function(){var t=this,e=this.props.item.quantity,n=this.props.item.productPrice;return Object(p.jsx)(x,{children:function(r){return Object(p.jsx)(s.a.Fragment,{children:Object(p.jsxs)("tr",{children:[Object(p.jsxs)("td",{children:[t.props.item.productName," (",t.props.item.categoryName,")",Object(p.jsx)("br",{}),t.props.item.productCode]}),Object(p.jsx)("td",{children:Object(p.jsxs)("select",{value:e,onChange:function(e){return t.updateItemQuantity(t.props.item.productID,e.target.value)},children:[Object(p.jsx)("option",{value:"0",children:"0"}),Object(p.jsx)("option",{value:"1",children:"1"}),Object(p.jsx)("option",{value:"2",children:"2"}),Object(p.jsx)("option",{value:"3",children:"3"}),Object(p.jsx)("option",{value:"4",children:"4"}),Object(p.jsx)("option",{value:"5",children:"5"})]})}),Object(p.jsxs)("td",{children:["$",n.toFixed(2)]}),Object(p.jsxs)("td",{children:["$",(n*e).toFixed(2)]})]})})}})}}]),n}(r.Component);M.contextType=b;var B=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).state={token:null,cartresp:{cart:{}}},r}return Object(u.a)(n,[{key:"getCart",value:function(){var t=this,e=I("GET",null,this.state.token);fetch("http://localhost:5000/api/cart",e).then((function(t){return t.json()})).then((function(e){return t.setState({cartresp:e})}))}},{key:"componentDidMount",value:function(){var t=this;this.setState({token:void 0===this.context?null:this.context.user.accessToken},(function(){return t.getCart()}))}},{key:"getTotals",value:function(t){var e=0,n=0,r=0;if(void 0!==this.state.cartresp&&null!==this.state.cartresp.cart&&Array.isArray(this.state.cartresp.cart)){var s=this.state.cartresp.cart;for(var c in s){null!==t&&t.prod===s[c].productID&&(s[c].quantity=t.quantity);var a=s[c].quantity,o=s[c].productPrice;s[c].quantity>0&&e++,n+=a,r+=o*a}}return{products:e,quantity:n,cost:r}}},{key:"render",value:function(){var t=this,e=this.getTotals(null);return Object(p.jsx)(x,{children:function(n){var r=null!==n.user.accessToken;return Object(p.jsx)("div",{className:"MainBody",children:r?Object(p.jsx)("div",{className:"container-fluid",children:Array.isArray(t.state.cartresp.cart)?Object(p.jsx)(s.a.Fragment,{children:Object(p.jsxs)("div",{className:"container-fluid row",children:[Object(p.jsx)("div",{className:"container-fluid",children:"This is where we'd validate payment info and shipping address..."}),Object(p.jsxs)("div",{className:"col-auto",children:["Products: ",Object(p.jsx)("span",{id:"totalprod",children:e.products}),Object(p.jsx)("br",{}),"Quantity: ",Object(p.jsx)("span",{id:"totalqty",children:e.quantity}),Object(p.jsx)("br",{}),"Total: $",Object(p.jsx)("span",{id:"totalcost",children:e.cost})]}),e.quantity<1?null:Object(p.jsx)("div",{id:"orderbutton",style:{display:"block"},className:"col-auto",children:Object(p.jsx)(h.b,{to:{pathname:"/submitorder",state:{fromneworder:"fno"}},children:Object(p.jsx)("button",{className:"action",children:"Submit"})})})]})}):null}):Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{id:"cmdLogon",className:"action",children:"Log On"})})})}})}}]),n}(r.Component);B.contextType=b;var P=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).fromneworder=!1,r.state={token:null,orderresp:null},r.fromneworder=void 0!==r.props.location&&void 0!==r.props.location.state&&"fno"===r.props.location.state.fromneworder,r}return Object(u.a)(n,[{key:"placeOrder",value:function(){var t=this;if(!0===this.fromneworder&&null!==this.state.token){var e=I("GET",null,this.state.token);fetch("http://localhost:5000/api/cart/submit ",e).then((function(t){return t.json()})).then((function(e){return t.setState({orderresp:e})})).catch((function(t){return alert("Unable to submit order")}))}}},{key:"componentDidMount",value:function(){var t=this;this.setState({token:void 0===this.context?null:this.context.user.accessToken},(function(){return t.placeOrder()}))}},{key:"NeedLogon",value:function(){return Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{className:"action",children:"Log On"})})}},{key:"NotFromCart",value:function(){return Object(p.jsxs)("span",{children:["Please review the shopping cart first",Object(p.jsx)("br",{}),Object(p.jsx)(h.b,{to:"/cart",children:Object(p.jsx)("button",{className:"action",children:"Cart"})})]})}},{key:"NoOrder",value:function(){return Object(p.jsx)(h.b,{to:"/products",children:Object(p.jsx)("button",{className:"action",children:"No order placed"})})}},{key:"OrderPlaced",value:function(){return Object(p.jsxs)("span",{children:["Thank you for your custom.  Your order number is: ",this.state.orderresp.orderID]})}},{key:"render",value:function(){var t=this;return Object(p.jsx)(x,{children:function(e){var n=null!==e.user.accessToken,r=!0===t.fromneworder,s=null!==t.state.orderresp&&null!==t.state.orderresp.orderID;return Object(p.jsx)("div",{className:"MainBody",children:!1===n?t.NeedLogon():!1===r?t.NotFromCart():!1===s?t.NoOrder():t.OrderPlaced()})}})}}]),n}(r.Component);P.contextType=b;var L=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).state={token:null,status:"all",ordersresp:{offset:0,pageSize:5,totalRecords:0,prevPage:null,nextPage:null,orders:{}}},r}return Object(u.a)(n,[{key:"getOrders",value:function(){var t=this,e=I("GET",null,this.state.token),n=this.state.ordersresp.pageSize,r=document.getElementById("selectstatus").value;fetch(N+"/orders?offset=0&pagesize="+n+("all"===r?"":"&status="+r),e).then((function(t){return t.json()})).then((function(e){return t.setState({ordersresp:e})}))}},{key:"statusSelected",value:function(t){var e=this;this.setState({status:t},(function(){return e.getOrders()}))}},{key:"navigateList",value:function(t){var e=this,n=I("GET",null,this.state.token);fetch(t,n).then((function(t){return t.json()})).then((function(t){return e.setState({ordersresp:t})}))}},{key:"componentDidMount",value:function(){var t=this,e=this.context;this.setState({token:void 0===e?null:e.user.accessToken},(function(){return t.getOrders()}))}},{key:"showOrders",value:function(){var t=this,e=0,n=0;return 0!==this.state.ordersresp.totalRecords&&(e=this.state.ordersresp.offset+1,n=this.state.ordersresp.offset+this.state.ordersresp.orders.length),Object(p.jsxs)("div",{className:"MainBody",children:[Object(p.jsxs)("div",{className:"container-fluid",children:["Order status: ",Object(p.jsxs)("select",{id:"selectstatus",className:"downright",onChange:function(e){return t.orderSelected(e.target.value)},children:[Object(p.jsx)("option",{value:"all",children:"All"}),Object(p.jsx)("option",{value:"processing",children:"Processing"}),Object(p.jsx)("option",{value:"shipped",children:"Shipped"}),Object(p.jsx)("option",{value:"complete",children:"Complete"}),Object(p.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),"Orders ",e," to ",n," of ",this.state.ordersresp.totalRecords]}),Object(p.jsx)("div",{className:"container-fluid",children:Array.isArray(this.state.ordersresp.orders)?Object(p.jsxs)("table",{className:"table",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Order"}),Object(p.jsx)("th",{children:"Status"}),Object(p.jsx)("th",{children:"Date"})]})}),Object(p.jsx)("tbody",{children:this.state.ordersresp.orders.map((function(t){return Object(p.jsx)(F,{order:t},t.orderID)}))})]}):null}),Object(p.jsxs)("div",{className:"container-fluid productbox",children:[null==this.state.ordersresp.prevPage?null:Object(p.jsx)("button",{id:"backButton",className:"downright",onClick:function(e){return t.navigateList(t.state.ordersresp.prevPage)},children:"<< Back"}),null==this.state.ordersresp.nextPage?null:Object(p.jsx)("button",{id:"nextButton",className:"downright",onClick:function(e){return t.navigateList(t.state.ordersresp.nextPage)},children:">> Next"})]})]})}},{key:"render",value:function(){var t=this;return Object(p.jsx)(x,{children:function(e){return!1===(null!==e.user.accessToken)?Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{className:"action",children:"Log on"})}):t.showOrders()}})}}]),n}(r.Component);L.contextType=b;var F=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var t=this,e=function(t,e){var n=["January","February","March","April","May","June","July","August","September","October","November","December"],r=new Date(t),s=r.getDate(),c=e.replace("d",s);c=(c=(c=c.replace("yyyy",r.getFullYear())).replace("MMMM",n[r.getMonth()])).replace("MMM",n[r.getMonth()].substring(0,3));var a=r.getHours();return c=c.replace("H",a),s=a<12?"AM":"PM",a>12&&(a-=12),c=(c=c.replace("@",s)).replace("h",a),0===(s=r.getMinutes())&&(s=12),s<10&&(s="0"+s),c.replace("mm",s)}(this.props.order.orderDate,"MMM d, yyyy h:mm@");return Object(p.jsx)(x,{children:function(n){return Object(p.jsx)(s.a.Fragment,{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:t.props.order.orderID}),Object(p.jsx)("td",{children:t.props.order.orderStatus}),Object(p.jsx)("td",{children:e})]})})}})}}]),n}(r.Component);F.contextType=b;var U=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).state={token:null,categoryresp:{offset:0,pageSize:5,totalRecords:0,prevPage:null,nextPage:null,categories:{}}},r}return Object(u.a)(n,[{key:"navigateList",value:function(t){var e=this,n=I("GET",null,this.state.token);fetch(t,n).then((function(t){return t.json()})).then((function(t){return e.setState({categoryresp:t})}))}},{key:"getData",value:function(){var t=this;if(null!=this.state.token){var e=this.state.categoryresp.pageSize,n=N+"/categories/list?offset=0&sort=name&pagesize="+e,r=I("GET",null,this.state.token);fetch(n,r).then((function(t){return t.json()})).then((function(e){return t.setState({categoryresp:e})}))}}},{key:"componentDidMount",value:function(){var t=this,e=this.context;this.setState({token:void 0===e?null:e.user.accessToken},(function(){return t.getData()}))}},{key:"NeedLogon",value:function(){return Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{className:"action",children:"Log On"})})}},{key:"NotAdmin",value:function(){return"Access denied"}},{key:"NoCategories",value:function(){return"No categories found"}},{key:"ShowCategories",value:function(t){var e=this,n=0,r=0;return 0!==this.state.categoryresp.totalRecords&&(n=this.state.categoryresp.offset+1,r=this.state.categoryresp.offset+this.state.categoryresp.categories.length),Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsxs)("div",{className:"container-fluid",children:["Categories ",n," to ",r," of ",this.state.categoryresp.totalRecords]}),Object(p.jsx)("div",{className:"container-fluid",children:Array.isArray(this.state.categoryresp.categories)?this.state.categoryresp.categories.map((function(t){return Object(p.jsx)(R,{category:t},t.categoryID)})):null}),Object(p.jsxs)("div",{className:"container-fluid productbox",children:[t?Object(p.jsx)(h.b,{to:{pathname:"/editcategory",state:{id:0}},children:Object(p.jsx)("button",{className:"downright",children:"Add category"})}):null,null==this.state.categoryresp.prevPage?null:Object(p.jsx)("button",{id:"backButton",className:"downright",onClick:function(t){return e.navigateList(e.state.categoryresp.prevPage)},children:"<< Back"}),null==this.state.categoryresp.nextPage?null:Object(p.jsx)("button",{id:"nextButton",className:"downright",onClick:function(t){return e.navigateList(e.state.categoryresp.nextPage)},children:">> Next"})]})]})}},{key:"render",value:function(){var t=this;return Object(p.jsx)(x,{children:function(e){var n=null!==e.user.accessToken,r="Y"===e.user.userIsAdmin,s=t.state.categoryresp.totalRecords>0;return Object(p.jsx)("div",{className:"MainBody",children:!1===n?t.NeedLogon():!1===r?t.NotAdmin():!1===s?t.NoCategories():t.ShowCategories(r)})}})}}]),n}(r.Component);U.contextType=b;var R=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var t=this;return Object(p.jsx)(x,{children:function(e){var n="Y"===e.user.userIsAdmin;return Object(p.jsxs)("div",{className:"container-fluid productbox",children:[Object(p.jsxs)("div",{className:"boxed productnamebox",children:[t.props.category.categoryName," [","Y"===t.props.category.categoryIsActive?"Active":"Inactive","]",Object(p.jsx)("br",{}),t.props.category.categoryInfo]}),!1===n?null:Object(p.jsx)("div",{className:"boxed",children:Object(p.jsx)(h.b,{to:{pathname:"/editcategory",state:{id:t.props.category.categoryID}},children:Object(p.jsx)("button",{children:"Edit"})})})]})}})}}]),n}(r.Component);R.contextType=b;var G=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;Object(i.a)(this,n);var s=void 0!==(r=e.call(this,t)).props.location&&void 0!==r.props.location.state&&void 0!==r.props.location.state.id?r.props.location.state.id:null;return r.state={token:null,categoryID:s,categoryresp:null},r}return Object(u.a)(n,[{key:"getData",value:function(){var t=this;if(null!=this.state.categoryID&&null!=this.state.token)if(0===this.state.categoryID){this.setState({categoryresp:{categoryID:0,categoryName:"",categoryInfo:"",categoryCode:"",categoryIsActive:"Y"}})}else{var e=I("GET",null,this.state.token),n=N+"/categories/"+this.state.categoryID;fetch(n,e).then((function(t){return t.json()})).then((function(e){return t.setState({categoryresp:e})}))}}},{key:"componentDidMount",value:function(){var t=this;this.setState({token:void 0===this.context?null:this.context.user.accessToken},(function(){return t.getData()}))}},{key:"SaveCategory",value:function(){var t=this,e={categoryName:document.getElementById("catname").value,categoryInfo:document.getElementById("catinfo").value,categoryIsActive:document.getElementById("catok").checked?"Y":"N"},n=0===this.state.categoryresp.categoryID,r=I(n?"POST":"PATCH",e,this.state.token),s=N+"/categories"+(n?"":"/"+this.state.categoryresp.categoryID);fetch(s,r).then((function(t){return t.json()})).then((function(e){return t.setState({categoryresp:e},(function(){return alert("Category updated")}))})).catch((function(t){return alert("Unable to save category")}))}},{key:"NeedLogon",value:function(){return Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{className:"action",children:"Log On"})})}},{key:"NotAdmin",value:function(){return"Access denied"}},{key:"NoCategory",value:function(){return"No category selected"}},{key:"EditCategory",value:function(){var t=this;return Object(p.jsxs)(s.a.Fragment,{children:["Category Name: ",Object(p.jsx)("input",{id:"catname",type:"text",style:{width:"300px"},maxLength:"64",defaultValue:this.state.categoryresp.categoryName}),Object(p.jsx)("br",{}),"Info: ",Object(p.jsx)("input",{id:"catinfo",type:"text",style:{width:"350px"},maxLength:"512",defaultValue:this.state.categoryresp.categoryInfo}),Object(p.jsx)("br",{}),"Active: ",Object(p.jsx)("input",{id:"catok",type:"checkbox",defaultChecked:"Y"===this.state.categoryresp.categoryIsActive}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{className:"Action",onClick:function(e){return t.SaveCategory()},children:"Save"})]})}},{key:"render",value:function(){var t=null!=this.state.token,e=void 0!==this.context.user&&"Y"===this.context.user.userIsAdmin,n=null!=this.state.categoryresp;return Object(p.jsx)("div",{className:"MainBody",children:!1===t?this.NeedLogon():!1===e?this.NotAdmin():!1===n?this.NoCategory():this.EditCategory()})}}]),n}(r.Component);G.contextType=b;var Q=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).state={token:null,searchText:"",userresp:{offset:0,pageSize:5,totalRecords:0,prevPage:null,nextPage:null,users:{}}},r}return Object(u.a)(n,[{key:"getData",value:function(){var t=this,e=I("GET",null,this.state.token),n=this.state.userresp.pageSize,r=this.state.searchText,s=N+"/users/list?offset=0&sort=name&pagesize="+n+"&search="+encodeURIComponent(r);fetch(s,e).then((function(t){return t.json()})).then((function(e){return t.setState({userresp:e})}))}},{key:"searchSelected",value:function(t){var e=this;this.setState({searchText:t},(function(){return e.getData()}))}},{key:"navigateList",value:function(t){var e=this,n=I("GET",null,this.state.token);fetch(t,n).then((function(t){return t.json()})).then((function(t){return e.setState({userresp:t})}))}},{key:"componentDidMount",value:function(){var t=this,e=this.context;this.setState({token:void 0===e?null:e.user.accessToken},(function(){return t.getData()}))}},{key:"NeedLogon",value:function(){return Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{className:"action",children:"Log On"})})}},{key:"NotAdmin",value:function(){return"Access denied"}},{key:"NoUsers",value:function(){return"No users found"}},{key:"ShowUsers",value:function(t){var e=this,n=0,r=0;return 0!==this.state.userresp.totalRecords&&(n=this.state.userresp.offset+1,r=this.state.userresp.offset+this.state.userresp.users.length),Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsxs)("div",{className:"container-fluid",children:["Search: ",Object(p.jsx)("input",{id:"searchTarget",type:"text"}),Object(p.jsx)("button",{id:"doSearch",className:"downright",onClick:function(t){return e.searchSelected(document.getElementById("searchTarget").value)},children:"Find"}),"Users ",n," to ",r," of ",this.state.userresp.totalRecords]}),Object(p.jsx)("div",{className:"container-fluid",children:Array.isArray(this.state.userresp.users)?this.state.userresp.users.map((function(t){return Object(p.jsx)(q,{user:t},t.userID)})):null}),Object(p.jsxs)("div",{className:"container-fluid productbox",children:[Object(p.jsx)(h.b,{to:{pathname:"/edituser",state:{id:0}},children:Object(p.jsx)("button",{className:"downright",children:"Add User"})}),null==this.state.userresp.prevPage?null:Object(p.jsx)("button",{id:"backButton",className:"downright",onClick:function(t){return e.navigateList(e.state.userresp.prevPage)},children:"<< Back"}),null==this.state.userresp.nextPage?null:Object(p.jsx)("button",{id:"nextButton",className:"downright",onClick:function(t){return e.navigateList(e.state.userresp.nextPage)},children:">> Next"})]})]})}},{key:"render",value:function(){var t=null!=this.state.token,e=void 0!==this.context.user&&"Y"===this.context.user.userIsAdmin,n=null!=this.state.userresp&&this.state.userresp.totalRecords>0;return Object(p.jsx)("div",{className:"MainBody",children:!1===t?this.NeedLogon():!1===e?this.NotAdmin():!1===n?this.NoUsers():this.ShowUsers()})}}]),n}(r.Component);Q.contextType=b;var q=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{className:"container-fluid productbox",children:[Object(p.jsxs)("div",{className:"boxed usernamebox",children:[this.props.user.userEMail," [","Y"===this.props.user.userIsActive?"Active":"Inactive"," ","Y"===this.props.user.userIsAdmin?"Admin":"User","]",Object(p.jsx)("br",{}),this.props.user.userLastName,",(",this.props.user.userFirstName,")",Object(p.jsx)("br",{})]}),Object(p.jsx)("div",{className:"boxed",children:Object(p.jsx)(h.b,{to:{pathname:"/edituser",state:{id:this.props.user.userID}},children:Object(p.jsx)("button",{children:"Edit"})})})]})}}]),n}(r.Component);q.contextType=b;var Y=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;Object(i.a)(this,n);var s=void 0!==(r=e.call(this,t)).props.location&&void 0!==r.props.location.state&&void 0!==r.props.location.state.id?r.props.location.state.id:null;return r.state={token:null,userID:s,userresp:null},r}return Object(u.a)(n,[{key:"getData",value:function(){var t=this;if(null!=this.state.userID&&null!=this.state.token)if(0===this.state.userID){this.setState({userresp:{userID:0,userFirstName:"",userLastName:"",userEMail:"",userIsActive:"Y"}})}else{var e=I("GET",null,this.state.token),n=N+"/users/"+this.state.userID;fetch(n,e).then((function(t){return t.json()})).then((function(e){return t.setState({userresp:e})}))}}},{key:"componentDidMount",value:function(){var t=this;this.setState({token:void 0===this.context?null:this.context.user.accessToken},(function(){return t.getData()}))}},{key:"SaveUser",value:function(){var t=this,e={userFirstName:document.getElementById("ufname").value,userLastName:document.getElementById("ulname").value,userEMail:document.getElementById("uemail").value,userIsAdmin:document.getElementById("uadmin").checked?"Y":"N",userPassword:document.getElementById("upw").value,userIsActive:document.getElementById("uactive").checked?"Y":"N"},n=0===this.state.userresp.userID,r=I(n?"POST":"PATCH",e,this.state.token),s=N+"/users"+(n?"":"/"+this.state.userresp.userID);fetch(s,r).then((function(t){return t.json()})).then((function(e){return t.setState({userresp:e},(function(){return alert("User updated")}))})).catch((function(t){return alert("Unable to save User")}))}},{key:"NeedLogon",value:function(){return Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{className:"action",children:"Log On"})})}},{key:"NotAdmin",value:function(){return"Access denied"}},{key:"NotSelf",value:function(){return"Can not edit self"}},{key:"NoUser",value:function(){return"No user selected"}},{key:"EditUser",value:function(){var t=this,e="Y"===this.state.userresp.userIsActive,n="Y"===this.state.userresp.userIsAdmin;return Object(p.jsxs)(s.a.Fragment,{children:["User EMail: ",Object(p.jsx)("input",{id:"uemail",type:"text",style:{width:"300px"},maxLength:"64",defaultValue:this.state.userresp.userEMail}),Object(p.jsx)("br",{}),"First Name: ",Object(p.jsx)("input",{id:"ufname",type:"text",style:{width:"300px"},maxLength:"64",defaultValue:this.state.userresp.userFirstName}),Object(p.jsx)("br",{}),"Last Name: ",Object(p.jsx)("input",{id:"ulname",type:"text",style:{width:"300px"},maxLength:"64",defaultValue:this.state.userresp.userLastName}),Object(p.jsx)("br",{}),"Password: ",Object(p.jsx)("input",{id:"upw",type:"password",style:{width:"300px"},maxLength:"64"}),Object(p.jsx)("br",{}),"Admin: ",Object(p.jsx)("input",{id:"uadmin",type:"checkbox",defaultChecked:n}),Object(p.jsx)("br",{}),"Active: ",Object(p.jsx)("input",{id:"uactive",type:"checkbox",defaultChecked:e}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{className:"Action",onClick:function(e){return t.SaveUser()},children:"Save"})]})}},{key:"render",value:function(){var t=null!=this.state.token,e=null!=this.state.userresp,n=void 0!==this.context.user&&"Y"===this.context.user.userIsAdmin,r=null!=this.state.userresp&&this.state.userresp.userID===this.context.user.userID;return Object(p.jsx)("div",{className:"MainBody",children:!1===t?this.NeedLogon():!1===n?this.NotAdmin():!1===e?this.NoUser():r?this.NotSelf():this.EditUser()})}}]),n}(r.Component);Y.contextType=b;var J=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsxs)(f,{children:[Object(p.jsx)(v,{}),Object(p.jsx)(y,{}),Object(p.jsx)("div",{id:"BodyBlock",children:Object(p.jsx)(h.a,{children:Object(p.jsxs)(j.c,{children:[Object(p.jsx)(j.a,{path:"/",exact:!0,render:function(t){return Object(p.jsx)(k,Object(o.a)({},t))}}),Object(p.jsx)(j.a,{path:"/logon",exact:!0,render:function(t){return Object(p.jsx)(w,Object(o.a)({},t))}}),Object(p.jsx)(j.a,{path:"/logoff",exact:!0,render:function(t){return Object(p.jsx)(E,Object(o.a)({},t))}}),Object(p.jsx)(j.a,{path:"/products",exact:!0,render:function(t){return Object(p.jsx)(C,Object(o.a)({},t))}}),Object(p.jsx)(j.a,{path:"/cart",exact:!0,render:function(t){return Object(p.jsx)(S,Object(o.a)({},t))}}),Object(p.jsx)(j.a,{path:"/neworder",exact:!0,render:function(t){return Object(p.jsx)(B,Object(o.a)({},t))}}),Object(p.jsx)(j.a,{path:"/submitorder",exact:!0,render:function(t){return Object(p.jsx)(P,Object(o.a)({},t))}}),Object(p.jsx)(j.a,{path:"/orders",exact:!0,render:function(t){return Object(p.jsx)(L,Object(o.a)({},t))}}),Object(p.jsx)(j.a,{path:"/editproduct",exact:!0,render:function(t){return Object(p.jsx)(D,Object(o.a)({},t))}}),Object(p.jsx)(j.a,{path:"/categories",exact:!0,render:function(t){return Object(p.jsx)(U,Object(o.a)({},t))}}),Object(p.jsx)(j.a,{path:"/editcategory",exact:!0,render:function(t){return Object(p.jsx)(G,Object(o.a)({},t))}}),Object(p.jsx)(j.a,{path:"/users",exact:!0,render:function(t){return Object(p.jsx)(Q,Object(o.a)({},t))}}),Object(p.jsx)(j.a,{path:"/edituser",exact:!0,render:function(t){return Object(p.jsx)(Y,Object(o.a)({},t))}})]})})}),Object(p.jsx)(A,{})]})}}]),n}(r.Component);a.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(J,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.a043928c.chunk.js.map