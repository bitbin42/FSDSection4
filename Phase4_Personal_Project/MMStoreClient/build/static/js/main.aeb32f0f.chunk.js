(this.webpackJsonpmmstoreclient=this.webpackJsonpmmstoreclient||[]).push([[0],{26:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),a=n(20),c=n.n(a),o=(n(26),n(9)),i=n(2),u=n(3),l=n(5),d=n(4),h=n(6),j=n(7),p=(n(27),n(0)),A=s.a.createContext(),b=A.Consumer;function x(e){for(var t="",n=document.cookie.split(";"),r=0;r<n.length;r++){var s=n[r].split("=");e===s[0].trim()&&(t=decodeURIComponent(s[1]))}return t}var m=function(){var e={userID:null,userFirstName:null,userLastName:null,userEMail:null,userIsAdmin:"N",accessToken:null},t=x("MMSU");return t.length>0&&3===(t=t.split("|")).length&&(e.userFirstName=t[1],e.userLastName=t[2],e.userEMail=t[0],(t=x("MMST")).length>0&&3===(t=t.split("|")).length&&(e.userID=parseInt(t[0]),e.userIsAdmin=t[1],e.accessToken=t[2])),e},O=function(e,t){switch(t.type){case"UPDATE_USER":return function(e){var t=encodeURIComponent(e.userEMail)+"|"+encodeURIComponent(e.userFirstName)+"|"+encodeURIComponent(e.userLastName);document.cookie="MMSU="+t+";Path=/",document.cookie="MMST="+e.userID+"|"+e.userIsAdmin+"|"+encodeURIComponent(e.accessToken)+";Path=/"}(t.payload),Object(o.a)(Object(o.a)({},e),{},{user:t.payload});case"LOGOFF_USER":return document.cookie="MMSU=;MaxAge=0;Path=/",document.cookie="MMST=;MaxAge=0;Path=/",Object(o.a)(Object(o.a)({},e),{},{user:{userID:null,userFirstName:null,userLastName:null,userEMail:null,userIsAdmin:"N",accessToken:null}});default:return e}},v=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={user:m(),dispatch:function(e){return r.setState((function(t){return O(t,e)}))}},r}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsx)(A.Provider,{value:this.state,children:this.props.children})}}]),n}(r.Component),f=function(){return Object(p.jsxs)("div",{className:"MainHeader",children:[Object(p.jsx)("img",{src:"data:image/gif;base64,R0lGODlhMwAwAPcAAAAAAAAm/wcq9AUp+AQo+gcq+Akr8wgq9Agq9Qkr9ggq9wos8gos8wwt8Q4v8A0u8Qwu8hMz7hIy7xU07hU17xc27xg37Rk47Rs67Rs67hw77h887B087R897hAw8BAx8hIy8BEy8xEy9BM08xQ08Rg38SM92iU/2SU/2yE+7CA+7SZA2idB2ylD2ipD2ytE3DBJ3DFK3TVN3TdP3TZO3jpR3jtS3zxT3j1U3yNB7iRC7SdE7ilF7StI7ixI7TBM7jBM7zJO7zRP7zZQ6DVQ7zhT8DtV8D1X8T5Y8WpyoEFY4EFY4kVc4UZd4kde4kde40Fa7ERc7Elf40Ba8UFb8kNc8kJc9kVe8kpg40xi5E5k5U5k5kdg809n9lBl5VBl5lFm5lRp51Rq6FVr6Vds6Fhs6Flu6VFo8FJq91tw6ltw615y611x7F9z7Fpw9F51+192+2B07GB07WJ27mR47mV572h872Z68Gd9/2l98Gh88Wt+8m6B8m6B82+C82+C9HCD83GE9HOG9XSH9XSH9nWI93eK+HiL93mL+HiL+XqM+HqM+XuN+nyO+n2P+36Q+gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAP8ALAAAAAAzADAAAAj/AP8JHEiwoMGDCBMqXMiwocOHECM+DCSxIkMdARyYsTjHYsEqAUIG4BGxzYMAQTwOFCnygkNDE1gSUYmDpUiNCwvZDLnII5adIkkiVIMA6BaVAoCGxGCwEAOlAeSolCKyBAmbDgh2sZlAhMgeKgVeEDnEiM0FAoWwNCDGDcuwAtOIFPAPj01CY1gCEahCpBC4An+InCCQQ8gD/1iIzCCwg0jEgAUeEAlGIJIAMP6hCAChjsA/LJ9IrHHChJcwBduIbGAwydGBhkPOPGgoYYqdFpw8QvQPY0iXCSmwJESQUZsYEgLsNTgFakgVRFheQahTZBGBeho52LnHoHOoCD2I/yQA5UVypQgKDrI54ur3DQYrfAcao2Bzlh+snOkLnmCi+QXsRINBd2zHEhz/BHKHbzIV1AdQD4jxxT9o7JQSQgzKNtAgeSixQADAFfTGV1v8MVAhBtiUw0L3DfZIQYAkxMZrAznCn0ggeMZQgTYhaNFOR0SUYQCoRfTHUyztUFGLAdSQkCIHfWGTBiZaxKMPAm000CEBKBAAlgZNFhIVgOUhUExaDEQGS4IQVOQSMUwY2T8RhETHQEmJpMRAWgQgwZwEeUHZSiylAFtIMwAqEB8i3fmPDDtR9I9INij6zxoiySBQAzvhINAAIY1haR4iNSGQSCGIpMKpIa1gqRkixYrxT0whuXFSSDEKFkALljYhUhaThqTDPzZQ+k9sJ1jKaEhRMBhjsAHAJ9INlmIaUqohcTAQrQFcQUBIZFhqB1B2DJQFqiLxqmgZQBUElAuWMrHTnwRxsZOrii7LkhQG1cmSp4quyRIDB5lgk5aKihkSsAelWKqlAq3xzyDPIuTHRmlArPHGHHc8UEAAOw==",className:"MMMLogo",alt:"MMM"}),Object(p.jsx)("div",{className:"HeaderText",children:Object(p.jsx)("h1",{children:"Mumbai Medicine Mart"})})]})},g=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsx)(b,{children:function(e){var t="Y"===e.user.userIsAdmin,n=e.user.userFirstName,r=null!==e.user.accessToken;return Object(p.jsx)("nav",{className:"navbar navbar-expand-sm",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)("a",{href:"/",className:"nav-link",children:"Home"})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)("a",{href:"/products",className:"nav-link",children:"Products"})}),t?Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)("a",{href:"/categories",className:"nav-link",children:"Categories"})}):"",t?Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)("a",{href:"/users",className:"nav-link",children:"Users"})}):"",r?Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsxs)("a",{href:"/logoff",className:"nav-link",children:["Log off ",n]})}):Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)("a",{href:"/logon",className:"nav-link",children:"Log on"})}),r?Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)("a",{href:"/cart",className:"nav-link",children:"Cart"})}):"",r?Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)("a",{href:"/orders",className:"nav-link",children:"Orders"})}):""]})})})}})}}]),n}(r.Component),y=function(){return Object(p.jsx)("div",{className:"Footer",children:"Copyright \xa9 2021 ABC Healthcare Mumbai Medicine Mart"})},k=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{className:"MainBody",children:["Welcome to the Mumbai Medicine Mart, a division of ABC Healthcare",Object(p.jsx)("br",{}),Object(p.jsx)("br",{})]})}}]),n}(r.Component),N="http://localhost:5000/api";function I(e,t,n){var r={method:e},s={};return null!=t&&(s["Content-Type"]="application/json",r.body=JSON.stringify(t)),null!==n&&void 0!==n&&n.length>0&&(s.Authorization="Bearer "+n),r.headers=s,r}var T=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"completeLogon",value:function(e){this.context.dispatch({type:"UPDATE_USER",payload:e}),document.getElementById("logonmessage").innerText="Welcome back "+e.userFirstName+" "+e.userLastName}},{key:"logonFailed",value:function(e){document.getElementById("logonmessage").innerText="Logon failed"}},{key:"doLogon",value:function(){var e=this,t={userEMail:document.getElementById("txtEMail").value,userPassword:document.getElementById("txtPW").value},n=I("POST",t,null);document.getElementById("logonmessage").innerText="Logging on...",fetch("http://localhost:5000/api/authorize/login",n).then((function(e){return e.json()})).then((function(t){return e.completeLogon(t)})).catch((function(t){return e.logonFailed(t)}))}},{key:"completeRegistration",value:function(e){this.context.dispatch({type:"UPDATE_USER",payload:e}),document.getElementById("registermessage").innerText="Welcome "+e.userFirstName+" "+e.userLastName}},{key:"registrationFailed",value:function(e){document.getElementById("registermessage").innerText="Registration failed"}},{key:"doRegister",value:function(){var e=this,t=document.getElementById("txtNewEMail").value.trim(),n=document.getElementById("txtNewPW").value.trim(),r=document.getElementById("txtNewPW2").value.trim(),s=document.getElementById("txtNewFN").value.trim(),a=document.getElementById("txtNewLN").value.trim(),c=document.getElementById("registermessage");if(0===t.length)c.innerText="An email address is required";else if(0===n.length)c.innerText="A password is required";else if(n!==r)c.innerText="The passwords do not match";else if(0===s.length||0===a.length)c.innerText="First and Last name are required";else{var o=I("POST",{userEMail:t,userPassword:n,userFirstName:s,userLastName:a},null);c.innerText="Registering...",fetch("http://localhost:5000/api/authorize/register",o).then((function(e){return e.json()})).then((function(t){return e.completeRegistration(t)})).catch((function(t){return e.registrationFailed(t)}))}}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{className:"MainBody row",children:[Object(p.jsxs)("div",{className:"col-auto downright border",children:["Returning users:",Object(p.jsx)("br",{}),"EMail address: ",Object(p.jsx)("input",{id:"txtEMail",required:!0,width:250,type:"email"}),Object(p.jsx)("br",{}),"Password: ",Object(p.jsx)("input",{id:"txtPW",required:!0,width:250,type:"password"}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{id:"cmdLogon",onClick:function(t){return e.doLogon()},className:"ActionButton",children:"Log on"}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsx)("span",{id:"logonmessage"})]}),Object(p.jsxs)("div",{className:"col-auto border",children:["New users:",Object(p.jsx)("br",{}),"EMail address: ",Object(p.jsx)("input",{id:"txtNewEMail",required:!0,width:250,type:"email"}),Object(p.jsx)("br",{}),"Password: ",Object(p.jsx)("input",{id:"txtNewPW",required:!0,width:250,type:"password"}),Object(p.jsx)("br",{}),"Confirm Password: ",Object(p.jsx)("input",{id:"txtNewPW2",required:!0,width:250,type:"password"}),Object(p.jsx)("br",{}),"First Name: ",Object(p.jsx)("input",{id:"txtNewFN",required:!0,width:250,type:"text"}),Object(p.jsx)("br",{}),"Last Name: ",Object(p.jsx)("input",{id:"txtNewLN",required:!0,width:250,type:"text"}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{id:"cmdRegister",onClick:function(t){return e.doRegister()},className:"ActionButton",children:"Register"}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsx)("span",{id:"registermessage"})]})]})}}]),n}(r.Component);T.contextType=A;var C=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).msg="Please log on to make purchases",e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){void 0!==this.context&&null!=this.context.user&&null!==this.context.user.accessToken&&(this.context.dispatch({type:"LOGOFF_USER",payload:null}),this.msg="Come back soon!")}},{key:"render",value:function(){return Object(p.jsx)("div",{className:"MainBody",children:Object(p.jsx)("span",{children:this.msg})})}}]),n}(r.Component);C.contextType=A;var S=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={token:null,catSelected:0,searchText:"",categoryresp:[],productresp:{offset:0,pageSize:5,totalRecords:0,prevPage:null,nextPage:null,products:{}}},r}return Object(u.a)(n,[{key:"getProducts",value:function(){var e=this,t=I("GET",null,this.state.token),n=this.state.productresp.pageSize,r=this.state.catSelected,s=this.state.searchText,a=N+"/products/list?offset=0&sort=name&pagesize="+n+"&categoryid="+r+"&Search="+encodeURIComponent(s);fetch(a,t).then((function(e){return e.json()})).then((function(t){return e.setState({productresp:t})}))}},{key:"categorySelected",value:function(e){var t=this;this.setState({catSelected:e},(function(){return t.getProducts()}))}},{key:"searchSelected",value:function(e){var t=this;this.setState({searchText:e},(function(){return t.getProducts()}))}},{key:"navigateList",value:function(e){var t=this,n=I("GET",null,this.state.token);fetch(e,n).then((function(e){return e.json()})).then((function(e){return t.setState({productresp:e})}))}},{key:"getData",value:function(){var e=this,t=I("GET",null,this.state.token);fetch("http://localhost:5000/api/categories/list?pagesize=500&offset=0",t).then((function(e){return e.json()})).then((function(t){return e.setState({categoryresp:t.categories})})),this.getProducts()}},{key:"componentDidMount",value:function(){var e=this,t=this.context;this.setState({token:void 0===t?null:t.user.accessToken},(function(){return e.getData()}))}},{key:"render",value:function(){var e=this;return Object(p.jsx)(b,{children:function(t){var n=null!==t.user.accessToken,r="Y"===t.user.userIsAdmin,s=0,a=0;return 0!==e.state.productresp.totalRecords&&(s=e.state.productresp.offset+1,a=e.state.productresp.offset+e.state.productresp.products.length),Object(p.jsxs)("div",{className:"MainBody",children:[Object(p.jsxs)("div",{className:"container-fluid",children:["Category: ",Object(p.jsxs)("select",{id:"catselect",className:"downright",onChange:function(t){return e.categorySelected(t.target.value)},children:[Object(p.jsx)("option",{value:"0",children:"All"}),e.state.categoryresp.map((function(e){return Object(p.jsxs)("option",{value:e.categoryID,children:[e.categoryName,r&&"Y"!==e.categoryIsActive?" [inactive]":""]},e.categoryID)}))]}),"Search: ",Object(p.jsx)("input",{id:"searchTarget",type:"text"}),Object(p.jsx)("button",{id:"doSearch",className:"downright",onClick:function(t){return e.searchSelected(document.getElementById("searchTarget").value)},children:"Find"}),"Products ",s," to ",a," of ",e.state.productresp.totalRecords]}),Object(p.jsx)("div",{className:"container-fluid",children:Array.isArray(e.state.productresp.products)?e.state.productresp.products.map((function(e){return Object(p.jsx)(w,{product:e},e.productID)})):null}),Object(p.jsxs)("div",{className:"container-fluid productbox",children:[n?null:Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{className:"downright",children:"Log on"})}),r?Object(p.jsx)(h.b,{to:{pathname:"/editproduct",state:{id:0}},children:Object(p.jsx)("button",{className:"downright",children:"Add Product"})}):null,null==e.state.productresp.prevPage?null:Object(p.jsx)("button",{id:"backButton",className:"downright",onClick:function(t){return e.navigateList(e.state.productresp.prevPage)},children:"<< Back"}),null==e.state.productresp.nextPage?null:Object(p.jsx)("button",{id:"nextButton",className:"downright",onClick:function(t){return e.navigateList(e.state.productresp.nextPage)},children:">> Next"})]})]})}})}}]),n}(r.Component);S.contextType=A;var w=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).cartUpdated=function(e){0===e.quantity?alert("The item has been removed from the shopping cart"):alert("The item has been added to the shooping cart")},e.cartFailed=function(e){alert("Sorry, the shopping cart was not updated")},e.updateCart=function(t,n){var r=I("POST",{productID:t,quantity:n},void 0===e.context?null:e.context.user.accessToken);fetch("http://localhost:5000/api/cart",r).then((function(e){return e.json()})).then((function(t){return e.cartUpdated(t)})).catch((function(t){return e.cartFailed(t)}))},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(p.jsx)(b,{children:function(t){var n=null!==t.user.accessToken,r="Y"===t.user.userIsAdmin;return Object(p.jsxs)("div",{className:"container-fluid productbox",children:[Object(p.jsxs)("div",{className:"boxed productnamebox",children:[e.props.product.productName," (",e.props.product.categoryName,")",Object(p.jsx)("br",{}),e.props.product.productInfo,Object(p.jsx)("br",{}),e.props.product.productCode]}),Object(p.jsxs)("div",{className:"boxed",children:["$",e.props.product.productPrice.toFixed(2),!1===n||"Y"!==e.props.product.productIsActive?null:Object(p.jsx)("span",{className:"p-4",children:Object(p.jsx)("button",{id:"cmdBuy",onClick:function(t){return e.updateCart(e.props.product.productID,1)},children:"Purchase"})})]}),!1===r?null:Object(p.jsx)("div",{className:"boxed",children:Object(p.jsx)(h.b,{to:{pathname:"/editproduct",state:{id:e.props.product.productID}},children:Object(p.jsx)("button",{children:"Edit"})})})]})}})}}]),n}(r.Component);w.contextType=A;var E=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;Object(i.a)(this,n);var s=void 0!==(r=t.call(this,e)).props.location&&void 0!==r.props.location.state&&void 0!==r.props.location.state.id?r.props.location.state.id:null;return r.state={token:null,productID:s,categoryresp:null,productresp:null},r}return Object(u.a)(n,[{key:"getProduct",value:function(){var e=this;if(null!=this.state.productID&&null!=this.state.token)if(0===this.state.productID){this.setState({productresp:{productID:0,productName:"",productInfo:"",productCode:"",productPrice:0,categoryID:1,productIsActive:"Y"}})}else{var t=I("GET",null,this.state.token),n=N+"/products/"+this.state.productID;fetch(n,t).then((function(e){return e.json()})).then((function(t){return e.setState({productresp:t})}))}}},{key:"getData",value:function(){var e=this;if(null!=this.state.productID&&null!=this.state.token){var t=I("GET",null,this.state.token);fetch("http://localhost:5000/api/categories/list?pagesize=500&offset=0",t).then((function(e){return e.json()})).then((function(t){return e.setState({categoryresp:t.categories})})),this.getProduct()}}},{key:"componentDidMount",value:function(){var e=this;this.setState({token:void 0===this.context?null:this.context.user.accessToken},(function(){return e.getData()}))}},{key:"SaveProduct",value:function(){var e=this,t={productName:document.getElementById("prodname").value,productInfo:document.getElementById("prodinfo").value,productCode:document.getElementById("prodcode").value,productPrice:document.getElementById("prodcost").value,categoryID:document.getElementById("prodcat").value,productIsActive:document.getElementById("prodok").checked?"Y":"N"},n=0===this.state.productresp.productID,r=I(n?"POST":"PATCH",t,this.state.token),s=N+"/products"+(n?"":"/"+this.state.productresp.productID);fetch(s,r).then((function(e){return e.json()})).then((function(t){return e.setState({productresp:t},(function(){return alert("Product updated")}))})).catch((function(e){return alert("Unable to save product")}))}},{key:"NeedLogon",value:function(){return Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{className:"action",children:"Log On"})})}},{key:"NotAdmin",value:function(){return"Access denied"}},{key:"NoProduct",value:function(){return"No product selected"}},{key:"NoCategories",value:function(){return"No categories found"}},{key:"EditProduct",value:function(){var e=this;return Object(p.jsxs)(s.a.Fragment,{children:["Product Name: ",Object(p.jsx)("input",{id:"prodname",type:"text",style:{width:"300px"},maxLength:"64",defaultValue:this.state.productresp.productName}),Object(p.jsx)("br",{}),"Category: ",Object(p.jsx)("select",{id:"prodcat",defaultValue:this.state.productresp.categoryID,children:this.state.categoryresp.map((function(e){return Object(p.jsx)("option",{value:e.categoryID,children:e.categoryName},e.categoryID)}))}),Object(p.jsx)("br",{}),"Code: ",Object(p.jsx)("input",{id:"prodcode",type:"text",style:{width:"350px"},maxLength:"64",defaultValue:this.state.productresp.productCode}),Object(p.jsx)("br",{}),"Info: ",Object(p.jsx)("input",{id:"prodinfo",type:"text",style:{width:"350px"},maxLength:"512",defaultValue:this.state.productresp.productInfo}),Object(p.jsx)("br",{}),"Price: ",Object(p.jsx)("input",{id:"prodcost",type:"number",style:{width:"100px"},defaultValue:this.state.productresp.productPrice}),Object(p.jsx)("br",{}),"Active: ",Object(p.jsx)("input",{id:"prodok",type:"checkbox",defaultChecked:"Y"===this.state.productresp.productIsActive}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{className:"Action",onClick:function(t){return e.SaveProduct()},children:"Save"})]})}},{key:"render",value:function(){var e=null!=this.state.token,t=void 0!==this.context.user&&"Y"===this.context.user.userIsAdmin,n=null!=this.state.categoryresp,r=null!=this.state.productresp;return Object(p.jsx)("div",{className:"MainBody",children:!1===e?this.NeedLogon():!1===t?this.NotAdmin():!1===n?this.NoCategories():!1===r?this.NoProduct():this.EditProduct()})}}]),n}(r.Component);E.contextType=A;var D=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).newQuantity=function(e){var t=r.getTotals(e);document.getElementById("totalprod").innerText=t.products,document.getElementById("totalqty").innerText=t.quantity,document.getElementById("totalcost").innerText=t.cost.toFixed(2),document.getElementById("orderbutton").style.display=t.quantity>0?"block":"none"},r.state={token:null,cartresp:{cart:{}}},r}return Object(u.a)(n,[{key:"getCart",value:function(){var e=this,t=I("GET",null,this.state.token);fetch("http://localhost:5000/api/cart",t).then((function(e){return e.json()})).then((function(t){return e.setState({cartresp:t})}))}},{key:"componentDidMount",value:function(){var e=this;this.setState({token:void 0===this.context?null:this.context.user.accessToken},(function(){return e.getCart()}))}},{key:"getTotals",value:function(e){var t=0,n=0,r=0;if(void 0!==this.state.cartresp&&null!==this.state.cartresp.cart&&Array.isArray(this.state.cartresp.cart)){var s=this.state.cartresp.cart;for(var a in s){null!==e&&e.prod===s[a].productID&&(s[a].quantity=e.quantity);var c=s[a].quantity,o=s[a].productPrice;s[a].quantity>0&&t++,n+=c,r+=o*c}}return{products:t,quantity:n,cost:r}}},{key:"render",value:function(){var e=this,t=this.getTotals(null);return Object(p.jsx)(b,{children:function(n){var r=null!==n.user.accessToken;return Object(p.jsx)("div",{className:"MainBody",children:r?Object(p.jsx)("div",{className:"container-fluid",children:Array.isArray(e.state.cartresp.cart)?Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsxs)("table",{className:"table",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Product"}),Object(p.jsx)("th",{children:"Quantity"}),Object(p.jsx)("th",{children:"Price"}),Object(p.jsx)("th",{children:"Total"})]})}),Object(p.jsx)("tbody",{children:e.state.cartresp.cart.map((function(t){return Object(p.jsx)(M,{token:e.state.token,item:t,callback:e.newQuantity},t.productID)}))})]}),Object(p.jsxs)("div",{className:"container-fluid row",children:[Object(p.jsxs)("div",{className:"col-auto",children:["Products: ",Object(p.jsx)("span",{id:"totalprod",children:t.products}),Object(p.jsx)("br",{}),"Quantity: ",Object(p.jsx)("span",{id:"totalqty",children:t.quantity}),Object(p.jsx)("br",{}),"Total: $",Object(p.jsx)("span",{id:"totalcost",children:t.cost})]}),t.quantity<1?null:Object(p.jsx)("div",{id:"orderbutton",style:{display:"block"},className:"col-auto",children:Object(p.jsx)(h.b,{to:"/neworder",children:Object(p.jsx)("button",{className:"action",children:"Place order"})})})]})]}):null}):Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{id:"cmdLogon",className:"action",children:"Log On"})})})}})}}]),n}(r.Component);D.contextType=A;var M=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"updatedquantity",value:function(e){this.props.item.quantity=e.quantity,this.forceUpdate(),this.props.callback(e)}},{key:"updateItemQuantity",value:function(e,t){var n=this,r=I("POST",{productID:e,quantity:t},this.props.token);fetch("http://localhost:5000/api/cart",r).then((function(e){return e.json()})).then((function(e){return n.updatedquantity(e)})).catch((function(e){return alert("Unable to update shopping cart")}))}},{key:"render",value:function(){var e=this,t=this.props.item.quantity,n=this.props.item.productPrice;return Object(p.jsx)(b,{children:function(r){return Object(p.jsx)(s.a.Fragment,{children:Object(p.jsxs)("tr",{children:[Object(p.jsxs)("td",{children:[e.props.item.productName," (",e.props.item.categoryName,")",Object(p.jsx)("br",{}),e.props.item.productCode]}),Object(p.jsx)("td",{children:Object(p.jsxs)("select",{value:t,onChange:function(t){return e.updateItemQuantity(e.props.item.productID,t.target.value)},children:[Object(p.jsx)("option",{value:"0",children:"0"}),Object(p.jsx)("option",{value:"1",children:"1"}),Object(p.jsx)("option",{value:"2",children:"2"}),Object(p.jsx)("option",{value:"3",children:"3"}),Object(p.jsx)("option",{value:"4",children:"4"}),Object(p.jsx)("option",{value:"5",children:"5"})]})}),Object(p.jsxs)("td",{children:["$",n.toFixed(2)]}),Object(p.jsxs)("td",{children:["$",(n*t).toFixed(2)]})]})})}})}}]),n}(r.Component);M.contextType=A;var B=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={token:null,cartresp:{cart:{}}},r}return Object(u.a)(n,[{key:"getCart",value:function(){var e=this,t=I("GET",null,this.state.token);fetch("http://localhost:5000/api/cart",t).then((function(e){return e.json()})).then((function(t){return e.setState({cartresp:t})}))}},{key:"componentDidMount",value:function(){var e=this;this.setState({token:void 0===this.context?null:this.context.user.accessToken},(function(){return e.getCart()}))}},{key:"getTotals",value:function(e){var t=0,n=0,r=0;if(void 0!==this.state.cartresp&&null!==this.state.cartresp.cart&&Array.isArray(this.state.cartresp.cart)){var s=this.state.cartresp.cart;for(var a in s){null!==e&&e.prod===s[a].productID&&(s[a].quantity=e.quantity);var c=s[a].quantity,o=s[a].productPrice;s[a].quantity>0&&t++,n+=c,r+=o*c}}return{products:t,quantity:n,cost:r}}},{key:"render",value:function(){var e=this,t=this.getTotals(null);return Object(p.jsx)(b,{children:function(n){var r=null!==n.user.accessToken;return Object(p.jsx)("div",{className:"MainBody",children:r?Object(p.jsx)("div",{className:"container-fluid",children:Array.isArray(e.state.cartresp.cart)?Object(p.jsx)(s.a.Fragment,{children:Object(p.jsxs)("div",{className:"container-fluid row",children:[Object(p.jsx)("div",{className:"container-fluid",children:"This is where we'd validate payment info and shipping address..."}),Object(p.jsxs)("div",{className:"col-auto",children:["Products: ",Object(p.jsx)("span",{id:"totalprod",children:t.products}),Object(p.jsx)("br",{}),"Quantity: ",Object(p.jsx)("span",{id:"totalqty",children:t.quantity}),Object(p.jsx)("br",{}),"Total: $",Object(p.jsx)("span",{id:"totalcost",children:t.cost})]}),t.quantity<1?null:Object(p.jsx)("div",{id:"orderbutton",style:{display:"block"},className:"col-auto",children:Object(p.jsx)(h.b,{to:{pathname:"/submitorder",state:{fromneworder:"fno"}},children:Object(p.jsx)("button",{className:"action",children:"Submit"})})})]})}):null}):Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{id:"cmdLogon",className:"action",children:"Log On"})})})}})}}]),n}(r.Component);B.contextType=A;var P=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).fromneworder=!1,r.state={token:null,orderresp:null},r.fromneworder=void 0!==r.props.location&&void 0!==r.props.location.state&&"fno"===r.props.location.state.fromneworder,r}return Object(u.a)(n,[{key:"placeOrder",value:function(){var e=this;if(!0===this.fromneworder&&null!==this.state.token){var t=I("GET",null,this.state.token);fetch("http://localhost:5000/api/cart/submit ",t).then((function(e){return e.json()})).then((function(t){return e.setState({orderresp:t})})).catch((function(e){return alert("Unable to submit order")}))}}},{key:"componentDidMount",value:function(){var e=this;this.setState({token:void 0===this.context?null:this.context.user.accessToken},(function(){return e.placeOrder()}))}},{key:"NeedLogon",value:function(){return Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{className:"action",children:"Log On"})})}},{key:"NotFromCart",value:function(){return Object(p.jsxs)("span",{children:["Please review the shopping cart first",Object(p.jsx)("br",{}),Object(p.jsx)(h.b,{to:"/cart",children:Object(p.jsx)("button",{className:"action",children:"Cart"})})]})}},{key:"NoOrder",value:function(){return Object(p.jsx)(h.b,{to:"/products",children:Object(p.jsx)("button",{className:"action",children:"No order placed"})})}},{key:"OrderPlaced",value:function(){return Object(p.jsxs)("span",{children:["Thank you for your custom.  Your order number is: ",this.state.orderresp.orderID]})}},{key:"render",value:function(){var e=this;return Object(p.jsx)(b,{children:function(t){var n=null!==t.user.accessToken,r=!0===e.fromneworder,s=null!==e.state.orderresp&&null!==e.state.orderresp.orderID;return Object(p.jsx)("div",{className:"MainBody",children:!1===n?e.NeedLogon():!1===r?e.NotFromCart():!1===s?e.NoOrder():e.OrderPlaced()})}})}}]),n}(r.Component);P.contextType=A;var L=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={token:null,status:"all",ordersresp:{offset:0,pageSize:5,totalRecords:0,prevPage:null,nextPage:null,orders:{}}},r}return Object(u.a)(n,[{key:"getOrders",value:function(){var e=this,t=I("GET",null,this.state.token),n=this.state.ordersresp.pageSize,r=document.getElementById("selectstatus").value;fetch(N+"/orders?offset=0&pagesize="+n+("all"===r?"":"&status="+r),t).then((function(e){return e.json()})).then((function(t){return e.setState({ordersresp:t})}))}},{key:"statusSelected",value:function(e){var t=this;this.setState({status:e},(function(){return t.getOrders()}))}},{key:"navigateList",value:function(e){var t=this,n=I("GET",null,this.state.token);fetch(e,n).then((function(e){return e.json()})).then((function(e){return t.setState({ordersresp:e})}))}},{key:"componentDidMount",value:function(){var e=this,t=this.context;this.setState({token:void 0===t?null:t.user.accessToken},(function(){return e.getOrders()}))}},{key:"showOrders",value:function(){var e=this,t=0,n=0;return 0!==this.state.ordersresp.totalRecords&&(t=this.state.ordersresp.offset+1,n=this.state.ordersresp.offset+this.state.ordersresp.orders.length),Object(p.jsxs)("div",{className:"MainBody",children:[Object(p.jsxs)("div",{className:"container-fluid",children:["Order status: ",Object(p.jsxs)("select",{id:"selectstatus",className:"downright",onChange:function(t){return e.orderSelected(t.target.value)},children:[Object(p.jsx)("option",{value:"all",children:"All"}),Object(p.jsx)("option",{value:"processing",children:"Processing"}),Object(p.jsx)("option",{value:"shipped",children:"Shipped"}),Object(p.jsx)("option",{value:"complete",children:"Complete"}),Object(p.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),"Orders ",t," to ",n," of ",this.state.ordersresp.totalRecords]}),Object(p.jsx)("div",{className:"container-fluid",children:Array.isArray(this.state.ordersresp.orders)?Object(p.jsxs)("table",{className:"table",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Order"}),Object(p.jsx)("th",{children:"Status"}),Object(p.jsx)("th",{children:"Date"})]})}),Object(p.jsx)("tbody",{children:this.state.ordersresp.orders.map((function(e){return Object(p.jsx)(F,{order:e},e.orderID)}))})]}):null}),Object(p.jsxs)("div",{className:"container-fluid productbox",children:[null==this.state.ordersresp.prevPage?null:Object(p.jsx)("button",{id:"backButton",className:"downright",onClick:function(t){return e.navigateList(e.state.ordersresp.prevPage)},children:"<< Back"}),null==this.state.ordersresp.nextPage?null:Object(p.jsx)("button",{id:"nextButton",className:"downright",onClick:function(t){return e.navigateList(e.state.ordersresp.nextPage)},children:">> Next"})]})]})}},{key:"render",value:function(){var e=this;return Object(p.jsx)(b,{children:function(t){return!1===(null!==t.user.accessToken)?Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{className:"action",children:"Log on"})}):e.showOrders()}})}}]),n}(r.Component);L.contextType=A;var F=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=function(e,t){var n=["January","February","March","April","May","June","July","August","September","October","November","December"],r=new Date(e),s=r.getDate(),a=t.replace("d",s);a=(a=(a=a.replace("yyyy",r.getFullYear())).replace("MMMM",n[r.getMonth()])).replace("MMM",n[r.getMonth()].substring(0,3));var c=r.getHours();return a=a.replace("H",c),s=c<12?"AM":"PM",c>12&&(c-=12),a=(a=a.replace("@",s)).replace("h",c),0===(s=r.getMinutes())&&(s=12),s<10&&(s="0"+s),a.replace("mm",s)}(this.props.order.orderDate,"MMM d, yyyy h:mm@");return Object(p.jsx)(b,{children:function(n){return Object(p.jsx)(s.a.Fragment,{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:e.props.order.orderID}),Object(p.jsx)("td",{children:e.props.order.orderStatus}),Object(p.jsx)("td",{children:t})]})})}})}}]),n}(r.Component);F.contextType=A;var U=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={token:null,categoryresp:{offset:0,pageSize:5,totalRecords:0,prevPage:null,nextPage:null,categories:{}}},r}return Object(u.a)(n,[{key:"navigateList",value:function(e){var t=this,n=I("GET",null,this.state.token);fetch(e,n).then((function(e){return e.json()})).then((function(e){return t.setState({categoryresp:e})}))}},{key:"getData",value:function(){var e=this;if(null!=this.state.token){var t=this.state.categoryresp.pageSize,n=N+"/categories/list?offset=0&sort=name&pagesize="+t,r=I("GET",null,this.state.token);fetch(n,r).then((function(e){return e.json()})).then((function(t){return e.setState({categoryresp:t})}))}}},{key:"componentDidMount",value:function(){var e=this,t=this.context;this.setState({token:void 0===t?null:t.user.accessToken},(function(){return e.getData()}))}},{key:"NeedLogon",value:function(){return Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{className:"action",children:"Log On"})})}},{key:"NotAdmin",value:function(){return"Access denied"}},{key:"NoCategories",value:function(){return"No categories found"}},{key:"ShowCategories",value:function(e){var t=this,n=0,r=0;return 0!==this.state.categoryresp.totalRecords&&(n=this.state.categoryresp.offset+1,r=this.state.categoryresp.offset+this.state.categoryresp.categories.length),Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsxs)("div",{className:"container-fluid",children:["Categories ",n," to ",r," of ",this.state.categoryresp.totalRecords]}),Object(p.jsx)("div",{className:"container-fluid",children:Array.isArray(this.state.categoryresp.categories)?this.state.categoryresp.categories.map((function(e){return Object(p.jsx)(R,{category:e},e.categoryID)})):null}),Object(p.jsxs)("div",{className:"container-fluid productbox",children:[e?Object(p.jsx)(h.b,{to:{pathname:"/editcategory",state:{id:0}},children:Object(p.jsx)("button",{className:"downright",children:"Add category"})}):null,null==this.state.categoryresp.prevPage?null:Object(p.jsx)("button",{id:"backButton",className:"downright",onClick:function(e){return t.navigateList(t.state.categoryresp.prevPage)},children:"<< Back"}),null==this.state.categoryresp.nextPage?null:Object(p.jsx)("button",{id:"nextButton",className:"downright",onClick:function(e){return t.navigateList(t.state.categoryresp.nextPage)},children:">> Next"})]})]})}},{key:"render",value:function(){var e=this;return Object(p.jsx)(b,{children:function(t){var n=null!==t.user.accessToken,r="Y"===t.user.userIsAdmin,s=e.state.categoryresp.totalRecords>0;return Object(p.jsx)("div",{className:"MainBody",children:!1===n?e.NeedLogon():!1===r?e.NotAdmin():!1===s?e.NoCategories():e.ShowCategories(r)})}})}}]),n}(r.Component);U.contextType=A;var R=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(p.jsx)(b,{children:function(t){var n="Y"===t.user.userIsAdmin;return Object(p.jsxs)("div",{className:"container-fluid productbox",children:[Object(p.jsxs)("div",{className:"boxed productnamebox",children:[e.props.category.categoryName," [","Y"===e.props.category.categoryIsActive?"Active":"Inactive","]",Object(p.jsx)("br",{}),e.props.category.categoryInfo]}),!1===n?null:Object(p.jsx)("div",{className:"boxed",children:Object(p.jsx)(h.b,{to:{pathname:"/editcategory",state:{id:e.props.category.categoryID}},children:Object(p.jsx)("button",{children:"Edit"})})})]})}})}}]),n}(r.Component);R.contextType=A;var q=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;Object(i.a)(this,n);var s=void 0!==(r=t.call(this,e)).props.location&&void 0!==r.props.location.state&&void 0!==r.props.location.state.id?r.props.location.state.id:null;return r.state={token:null,categoryID:s,categoryresp:null},r}return Object(u.a)(n,[{key:"getData",value:function(){var e=this;if(null!=this.state.categoryID&&null!=this.state.token)if(0===this.state.categoryID){this.setState({categoryresp:{categoryID:0,categoryName:"",categoryInfo:"",categoryCode:"",categoryIsActive:"Y"}})}else{var t=I("GET",null,this.state.token),n=N+"/categories/"+this.state.categoryID;fetch(n,t).then((function(e){return e.json()})).then((function(t){return e.setState({categoryresp:t})}))}}},{key:"componentDidMount",value:function(){var e=this;this.setState({token:void 0===this.context?null:this.context.user.accessToken},(function(){return e.getData()}))}},{key:"SaveCategory",value:function(){var e=this,t={categoryName:document.getElementById("catname").value,categoryInfo:document.getElementById("catinfo").value,categoryIsActive:document.getElementById("catok").checked?"Y":"N"},n=0===this.state.categoryresp.categoryID,r=I(n?"POST":"PATCH",t,this.state.token),s=N+"/categories"+(n?"":"/"+this.state.categoryresp.categoryID);fetch(s,r).then((function(e){return e.json()})).then((function(t){return e.setState({categoryresp:t},(function(){return alert("Category updated")}))})).catch((function(e){return alert("Unable to save category")}))}},{key:"NeedLogon",value:function(){return Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{className:"action",children:"Log On"})})}},{key:"NotAdmin",value:function(){return"Access denied"}},{key:"NoCategory",value:function(){return"No category selected"}},{key:"EditCategory",value:function(){var e=this;return Object(p.jsxs)(s.a.Fragment,{children:["Category Name: ",Object(p.jsx)("input",{id:"catname",type:"text",style:{width:"300px"},maxLength:"64",defaultValue:this.state.categoryresp.categoryName}),Object(p.jsx)("br",{}),"Info: ",Object(p.jsx)("input",{id:"catinfo",type:"text",style:{width:"350px"},maxLength:"512",defaultValue:this.state.categoryresp.categoryInfo}),Object(p.jsx)("br",{}),"Active: ",Object(p.jsx)("input",{id:"catok",type:"checkbox",defaultChecked:"Y"===this.state.categoryresp.categoryIsActive}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{className:"Action",onClick:function(t){return e.SaveCategory()},children:"Save"})]})}},{key:"render",value:function(){var e=null!=this.state.token,t=void 0!==this.context.user&&"Y"===this.context.user.userIsAdmin,n=null!=this.state.categoryresp;return Object(p.jsx)("div",{className:"MainBody",children:!1===e?this.NeedLogon():!1===t?this.NotAdmin():!1===n?this.NoCategory():this.EditCategory()})}}]),n}(r.Component);q.contextType=A;var Q=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={token:null,searchText:"",userresp:{offset:0,pageSize:5,totalRecords:0,prevPage:null,nextPage:null,users:{}}},r}return Object(u.a)(n,[{key:"getData",value:function(){var e=this,t=I("GET",null,this.state.token),n=this.state.userresp.pageSize,r=this.state.searchText,s=N+"/users/list?offset=0&sort=name&pagesize="+n+"&search="+encodeURIComponent(r);fetch(s,t).then((function(e){return e.json()})).then((function(t){return e.setState({userresp:t})}))}},{key:"searchSelected",value:function(e){var t=this;this.setState({searchText:e},(function(){return t.getData()}))}},{key:"navigateList",value:function(e){var t=this,n=I("GET",null,this.state.token);fetch(e,n).then((function(e){return e.json()})).then((function(e){return t.setState({userresp:e})}))}},{key:"componentDidMount",value:function(){var e=this,t=this.context;this.setState({token:void 0===t?null:t.user.accessToken},(function(){return e.getData()}))}},{key:"NeedLogon",value:function(){return Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{className:"action",children:"Log On"})})}},{key:"NotAdmin",value:function(){return"Access denied"}},{key:"NoUsers",value:function(){return"No users found"}},{key:"ShowUsers",value:function(e){var t=this,n=0,r=0;return 0!==this.state.userresp.totalRecords&&(n=this.state.userresp.offset+1,r=this.state.userresp.offset+this.state.userresp.users.length),Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsxs)("div",{className:"container-fluid",children:["Search: ",Object(p.jsx)("input",{id:"searchTarget",type:"text"}),Object(p.jsx)("button",{id:"doSearch",className:"downright",onClick:function(e){return t.searchSelected(document.getElementById("searchTarget").value)},children:"Find"}),"Users ",n," to ",r," of ",this.state.userresp.totalRecords]}),Object(p.jsx)("div",{className:"container-fluid",children:Array.isArray(this.state.userresp.users)?this.state.userresp.users.map((function(e){return Object(p.jsx)(Y,{user:e},e.userID)})):null}),Object(p.jsxs)("div",{className:"container-fluid productbox",children:[Object(p.jsx)(h.b,{to:{pathname:"/edituser",state:{id:0}},children:Object(p.jsx)("button",{className:"downright",children:"Add User"})}),null==this.state.userresp.prevPage?null:Object(p.jsx)("button",{id:"backButton",className:"downright",onClick:function(e){return t.navigateList(t.state.userresp.prevPage)},children:"<< Back"}),null==this.state.userresp.nextPage?null:Object(p.jsx)("button",{id:"nextButton",className:"downright",onClick:function(e){return t.navigateList(t.state.userresp.nextPage)},children:">> Next"})]})]})}},{key:"render",value:function(){var e=null!=this.state.token,t=void 0!==this.context.user&&"Y"===this.context.user.userIsAdmin,n=null!=this.state.userresp&&this.state.userresp.totalRecords>0;return Object(p.jsx)("div",{className:"MainBody",children:!1===e?this.NeedLogon():!1===t?this.NotAdmin():!1===n?this.NoUsers():this.ShowUsers()})}}]),n}(r.Component);Q.contextType=A;var Y=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{className:"container-fluid productbox",children:[Object(p.jsxs)("div",{className:"boxed usernamebox",children:[this.props.user.userEMail," [","Y"===this.props.user.userIsActive?"Active":"Inactive"," ","Y"===this.props.user.userIsAdmin?"Admin":"User","]",Object(p.jsx)("br",{}),this.props.user.userLastName,",(",this.props.user.userFirstName,")",Object(p.jsx)("br",{})]}),Object(p.jsx)("div",{className:"boxed",children:Object(p.jsx)(h.b,{to:{pathname:"/edituser",state:{id:this.props.user.userID}},children:Object(p.jsx)("button",{children:"Edit"})})})]})}}]),n}(r.Component);Y.contextType=A;var G=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;Object(i.a)(this,n);var s=void 0!==(r=t.call(this,e)).props.location&&void 0!==r.props.location.state&&void 0!==r.props.location.state.id?r.props.location.state.id:null;return r.state={token:null,userID:s,userresp:null},r}return Object(u.a)(n,[{key:"getData",value:function(){var e=this;if(null!=this.state.userID&&null!=this.state.token)if(0===this.state.userID){this.setState({userresp:{userID:0,userFirstName:"",userLastName:"",userEMail:"",userIsActive:"Y"}})}else{var t=I("GET",null,this.state.token),n=N+"/users/"+this.state.userID;fetch(n,t).then((function(e){return e.json()})).then((function(t){return e.setState({userresp:t})}))}}},{key:"componentDidMount",value:function(){var e=this;this.setState({token:void 0===this.context?null:this.context.user.accessToken},(function(){return e.getData()}))}},{key:"SaveUser",value:function(){var e=this,t={userFirstName:document.getElementById("ufname").value,userLastName:document.getElementById("ulname").value,userEMail:document.getElementById("uemail").value,userIsAdmin:document.getElementById("uadmin").checked?"Y":"N",userPassword:document.getElementById("upw").value,userIsActive:document.getElementById("uactive").checked?"Y":"N"},n=0===this.state.userresp.userID,r=I(n?"POST":"PATCH",t,this.state.token),s=N+"/users"+(n?"":"/"+this.state.userresp.userID);fetch(s,r).then((function(e){return e.json()})).then((function(t){return e.setState({userresp:t},(function(){return alert("User updated")}))})).catch((function(e){return alert("Unable to save User")}))}},{key:"NeedLogon",value:function(){return Object(p.jsx)(h.b,{to:"/logon",children:Object(p.jsx)("button",{className:"action",children:"Log On"})})}},{key:"NotAdmin",value:function(){return"Access denied"}},{key:"NotSelf",value:function(){return"Can not edit self"}},{key:"NoUser",value:function(){return"No user selected"}},{key:"EditUser",value:function(){var e=this,t="Y"===this.state.userresp.userIsActive,n="Y"===this.state.userresp.userIsAdmin;return Object(p.jsxs)(s.a.Fragment,{children:["User EMail: ",Object(p.jsx)("input",{id:"uemail",type:"text",style:{width:"300px"},maxLength:"64",defaultValue:this.state.userresp.userEMail}),Object(p.jsx)("br",{}),"First Name: ",Object(p.jsx)("input",{id:"ufname",type:"text",style:{width:"300px"},maxLength:"64",defaultValue:this.state.userresp.userFirstName}),Object(p.jsx)("br",{}),"Last Name: ",Object(p.jsx)("input",{id:"ulname",type:"text",style:{width:"300px"},maxLength:"64",defaultValue:this.state.userresp.userLastName}),Object(p.jsx)("br",{}),"Password: ",Object(p.jsx)("input",{id:"upw",type:"password",style:{width:"300px"},maxLength:"64"}),Object(p.jsx)("br",{}),"Admin: ",Object(p.jsx)("input",{id:"uadmin",type:"checkbox",defaultChecked:n}),Object(p.jsx)("br",{}),"Active: ",Object(p.jsx)("input",{id:"uactive",type:"checkbox",defaultChecked:t}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{className:"Action",onClick:function(t){return e.SaveUser()},children:"Save"})]})}},{key:"render",value:function(){var e=null!=this.state.token,t=null!=this.state.userresp,n=void 0!==this.context.user&&"Y"===this.context.user.userIsAdmin,r=null!=this.state.userresp&&this.state.userresp.userID===this.context.user.userID;return Object(p.jsx)("div",{className:"MainBody",children:!1===e?this.NeedLogon():!1===n?this.NotAdmin():!1===t?this.NoUser():r?this.NotSelf():this.EditUser()})}}]),n}(r.Component);G.contextType=A;var z=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsxs)(v,{children:[Object(p.jsx)(f,{}),Object(p.jsx)(g,{}),Object(p.jsx)("div",{id:"BodyBlock",children:Object(p.jsx)(h.a,{children:Object(p.jsxs)(j.c,{children:[Object(p.jsx)(j.a,{path:"/",exact:!0,render:function(e){return Object(p.jsx)(k,Object(o.a)({},e))}}),Object(p.jsx)(j.a,{path:"/logon",exact:!0,render:function(e){return Object(p.jsx)(T,Object(o.a)({},e))}}),Object(p.jsx)(j.a,{path:"/logoff",exact:!0,render:function(e){return Object(p.jsx)(C,Object(o.a)({},e))}}),Object(p.jsx)(j.a,{path:"/products",exact:!0,render:function(e){return Object(p.jsx)(S,Object(o.a)({},e))}}),Object(p.jsx)(j.a,{path:"/cart",exact:!0,render:function(e){return Object(p.jsx)(D,Object(o.a)({},e))}}),Object(p.jsx)(j.a,{path:"/neworder",exact:!0,render:function(e){return Object(p.jsx)(B,Object(o.a)({},e))}}),Object(p.jsx)(j.a,{path:"/submitorder",exact:!0,render:function(e){return Object(p.jsx)(P,Object(o.a)({},e))}}),Object(p.jsx)(j.a,{path:"/orders",exact:!0,render:function(e){return Object(p.jsx)(L,Object(o.a)({},e))}}),Object(p.jsx)(j.a,{path:"/editproduct",exact:!0,render:function(e){return Object(p.jsx)(E,Object(o.a)({},e))}}),Object(p.jsx)(j.a,{path:"/categories",exact:!0,render:function(e){return Object(p.jsx)(U,Object(o.a)({},e))}}),Object(p.jsx)(j.a,{path:"/editcategory",exact:!0,render:function(e){return Object(p.jsx)(q,Object(o.a)({},e))}}),Object(p.jsx)(j.a,{path:"/users",exact:!0,render:function(e){return Object(p.jsx)(Q,Object(o.a)({},e))}}),Object(p.jsx)(j.a,{path:"/edituser",exact:!0,render:function(e){return Object(p.jsx)(G,Object(o.a)({},e))}})]})})}),Object(p.jsx)(y,{})]})}}]),n}(r.Component);c.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(z,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.aeb32f0f.chunk.js.map